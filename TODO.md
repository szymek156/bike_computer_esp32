# bike_computer_esp32

## TODO:
- Hardware
  - [x] Assemble a prototype, sensors, display, buttons
  - [x] Read from GPS, ALT/TEMP sensors
  - [x] Use E-Ink display
    - [ ] Frame transfer takes 200ms, consider transferring only dirty regions
    - [ ] Find out faster way for display to show now only 1fps is effective
    - [ ] Try to use a display from some e-reader, or find a better supplier? Hard to give up this idea, because it feels so right!
  - [ ] Use Sharp memory display
    - [x] Port the library, make SPI communication correct
    - [x] Update all GUIs
    - [ ] During drawing, send only dirty regions
  - [ ] Calibrate altitude
  - [ ] Read about temp, seems to be off by 2*
  - [ ] Add accelerometer
  - [ ] Design the case
  - [ ] Print the case and assemble!
- Software on the Device
  - [x] Provide an architecture (MVP) for handling GUI
  - [x] Figure out how to create and read/write partitions
  - [ ] Add health service monitoring every hour for CPU, RAM, FLASH, uptime, write data to the log.
    - [x] Gather data
    - [ ] Log every hour
    - [ ] Write to the file
    - [ ] Create a GUI page with that data, useful when device will go off line
  - [ ] Consider making paint class more cache friendly
  - [ ] Figure out BLE communication
    - [X] Try to not get insane while reading esp32 BLE api
    - [X] Design and implement GATTS server for fetching activities
    - [X] Add GUI for synchronization
  - [ ] Add ghost runner functionality
  - [ ] Use accel. to calculate cadence, and stride
  - [ ] Add travis CI
  - [ ] clang-tidy?
  - [ ] Add OTA support (2 partitions + factory)
  - [ ] Figure out testing
    - [ ] Functional tests
    - [ ] Unit tests
  - [x] Add new fonts: https://kapusta.cc/2020/03/20/fontedit/
  - [ ] Do refactor
- Other Software
  - [x] Create a tool to do GUI mockups fast
  - [ ] Create a tool to make Workout FIT or ZWO files (WASM?)
  - [ ] Create charts (WASM?)

- Activities
  - [x] Support FIT Activity files
  - [ ] Support FIT Workout files
  - [ ] Support FIT Course files
  - [ ] Looks like workouts are written in ZWO file format https://github.com/h4l/zwift-workout-file-reference
  - [ ] https://medium.com/hackernoon/cloning-zwift-on-ios-part-2-reverse-engineering-a-workout-9d4ffabc29e8
